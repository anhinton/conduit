<?xml version="1.0"?>
<module xmlns="http://www.openapi.org/2014/" language="R">
  <description>Plot a big old graphic of UK commute flow - http://blogs.casa.ucl.ac.uk/category/r-spatial/</description>
  <input name="trips">
    <internal symbol="dest.xy"/>
    <format formatType="text">R data frame</format>
  </input>
  <source>
    <script><![CDATA[library(ggplot2)

xquiet<- scale_x_continuous("", breaks=NULL)
yquiet<-scale_y_continuous("", breaks=NULL)
quiet<-list(xquiet, yquiet)

ggplot(dest.xy[which(dest.xy$trips>10),], aes(oX, oY))+

geom_segment(aes(x=oX, y=oY,xend=dX, yend=dY, alpha=trips), col="white")+

scale_alpha_continuous(range = c(0.03, 0.3))+

theme(panel.background = element_rect(fill='black',colour='black'))+quiet+coord_equal()
]]></script>
  </source>
  <output name="plot">
    <file ref="Rplots.pdf"/>
    <format formatType="text">PDF file</format>
  </output>
</module>
